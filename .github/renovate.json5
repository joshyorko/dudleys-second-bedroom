{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:best-practices"
  ],

  // Dependency Dashboard - creates a pinned issue to track all updates (like Bluefin)
  "dependencyDashboard": true,
  "dependencyDashboardTitle": "Dependency Dashboard",

  "rebaseWhen": "never",

  // Custom managers to track versions in shell scripts
  "customManagers": [
    {
      // Track RCC_VERSION in rcc-cli.sh
      "customType": "regex",
      "fileMatch": ["^build_files/developer/rcc-cli\\.sh$"],
      "matchStrings": [
        "RCC_VERSION=\"\\$\\{RCC_VERSION:-(?<currentValue>v[0-9]+\\.[0-9]+\\.[0-9]+)\\}\""
      ],
      "depNameTemplate": "joshyorko/rcc",
      "datasourceTemplate": "github-releases"
    },
    {
      // Track ORAS_VERSION in build.yml
      "customType": "regex",
      "fileMatch": ["^\\.github/workflows/build\\.yml$"],
      "matchStrings": [
        "ORAS_VERSION=\"(?<currentValue>[0-9]+\\.[0-9]+\\.[0-9]+)\""
      ],
      "depNameTemplate": "oras-project/oras",
      "datasourceTemplate": "github-releases"
    }
  ],

  // Platform automerge - tells Renovate to use GitHub's automerge feature
  "platformAutomerge": true,

  "packageRules": [
    // Automerge pin and pinDigest updates
    {
      "automerge": true,
      "matchUpdateTypes": ["pin", "pinDigest"]
    },
    // Automerge Dockerfile/Containerfile digest updates (keeps base image fresh)
    {
      "automerge": true,
      "matchManagers": ["dockerfile"],
      "matchUpdateTypes": ["digest"]
    },
    // Automerge GitHub Actions digest updates
    {
      "automerge": true,
      "matchManagers": ["github-actions"],
      "matchUpdateTypes": ["digest"]
    },
    // Group Universal Blue related updates together
    {
      "groupName": "Universal Blue dependencies",
      "matchPackagePatterns": ["^ghcr\\.io/ublue-os/"]
    },
    // Group all GitHub Actions updates by action name
    {
      "groupName": "GitHub Actions",
      "matchManagers": ["github-actions"],
      "matchUpdateTypes": ["minor", "patch"]
    }
  ]
}
